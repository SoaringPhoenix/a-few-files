<!-- HTTP/1.1 200 OK
Server: nginx
Date: Tue, 29 Jan 2019 09:50:43 GMT
Content-Type: text/html; charset=UTF-8
Connection: keep-alive
Vary: Accept-Encoding
X-Powered-By: PHP/5.6.12
Content-Length: 5620

 -->
 <!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta charset="UTF-8">
<meta content="width=device-width,minimum-scale=1.0,maximum-scale=1.0,user-scalable=no" name="viewport"/>
<title>平台基础action调试</title>
<!-- <script type="text/javascript" src="D:\chrome_download\vConsole-3.1.0\dist\vconsole.min.js"></script> -->
<style>
li{
margin:10px;
}
</style>
</head>
<body>
<h2>外部吊起app</h2>

<ol>
<li>
webview吊起作业帮App:  <a href="askhomework://com.baidu.homework?from=fengchao1">吊起</a>
</li>
</ol> 
<h2>内部吊起</h2>
<ol>
<li>
*获取公共参数common:  <button id="common">执行</button>
</li>

<li>
*判断是否登录is_login:  <button id="is_login">执行</button>
</li>

<li>
调用登录login:  <button id="login">执行</button>
</li>

<li>
调起登陆，并返回登陆状态loginForResult:  <button id="loginForResult">执行</button>
</li>

<li>
获取用户信息getuserinfo:  <button id="getuserinfo">执行</button>
</li>

<li>
打开新页面openWindow:  <button id="openWindow">执行</button>
</li>

<li>
退出当前页面exit:  <button id="exit">执行</button>
</li>

<li>
播放视频playVideo:  <button id="playVideo">执行</button>
</li>

<li>
播放视频移动网络提示playVideoHint:  <button id="playVideoHint">执行</button>
</li>

<li>
显示一个toast:  <button id="toast">Toast</button>
</li>

<li>
拨打电话dial:  <button id="dial">执行</button>
</li>

<li>
复制到剪切板copyToClipboard:  <button id="copyToClipboard">执行</button>
</li>

<li>
分享: share <button id="share">Share</button>
</li>

<li>
展示web页大图showWebPicture:  <button id="showWebPicture">执行</button>
</li>

<li>
去拍题 openCamera:  <button id="openCamera">执行</button>
</li>

<li>
webActivity是否禁用手势返回swapBack:  <button id="swapBack">执行</button>
</li>

<li>
跳转Activity统一action startActivity:  <button id="startActivity">执行</button>
</li>

<li>
页面缩放动作开始searchResultZoomStart:  <button id="searchResultZoomStart">执行</button>
</li>

<li>
下载多媒体数据（图片，视频，音乐，文档，通用）downloadMedia:  <button id="downloadMedia">执行</button>
</li>

<li>
 调用Vibrator vibrate<button id="vibrate">执行</button>
</li>

<li>
 调用邀请对话框 invite<button id="invite">执行</button>
</li>

<li>
 进入填写地址详情页面，如果填写成功，将会返回RESULT_OK address<button id="address">执行</button>
</li>

<li>
进入待解决列表页面 unsolved_questionlist<button id="unsolved_questionlist">执行</button>
</li>

<li>
进入填学校页面 fill_school<button id="fill_school">执行</button>
</li>

<li>
我的物品页 my_gift<button id="my_gift">执行</button>
</li>

<li>
开始刮卡 scrape_card<button id="scrape_card">执行</button>
</li>

<li>
进入帮帮商城 mall_home<button id="mall_home">执行</button>
</li>

<li>
获取地理位置 getLocation<button id="getLocation">执行</button>
</li>

<li>
在检索结果页面的webview显示问学霸入口 ugc<button id="ugc">执行</button>
</li>

<li>
收藏本加载更多 loadmore<button id="loadmore">执行</button>
</li>

<li>
收藏本空回调 loadempty<button id="loadempty">执行</button>
</li>

<li>
SearchResult页面跳到知识卡片的action knowledgeCard<button id="knowledgeCard">执行</button>
</li>

<li>
英语单元作文中拼完作文素材到得到完整的一篇作文，更新文章详情页的rightbutton showComposition<button id="showComposition">执行</button>
</li>

<li>
英文单元作文详情首页返回到作文列表 backCompositionList<button id="backCompositionList">执行</button>
</li>

<li>
文言文全文及译文页面点击跳转到更多词义页面 backToClassicalMoreMeaningPage<button id="backToClassicalMoreMeaningPage">执行</button>
</li>

<li>
调用Native登录操作,使用于邦邦商城 loginMall<button id="loginMall">执行</button>
</li>

<li>
检索结果导流打点 universalLaunchPage<button id="universalLaunchPage">执行</button>
</li>

<li>
猜你想拍二期 feedback<button id="feedback">执行</button>
</li>

<li>
下载笔迹数据解析成JSON传给fe downLoadPenData<button id="downLoadPenData">执行</button>
</li>

<li>
跳转EvaluationActivity goEvaluation<button id="goEvaluation">执行</button>
</li>

<li>
调微博分享文字接口，用于"话题" weiboShare<button id="weiboShare">执行</button>
</li>

<li>
视频回放页菜单弹出 playbackMenu<button id="playbackMenu">执行</button>
</li>

<li>
升级检测 updateCheck<button id="updateCheck">执行</button>
</li>

<li>
作文大赛投稿的action contributeComposition<button id="contributeComposition">执行</button>
</li>

<li>
作文大赛出书的action publishComposition<button id="publishComposition">执行</button>
</li>



<li>
文言文背诵控制录音按钮显示 reciteRecordVoiceButtonShow<button id="reciteRecordVoiceButtonShow">执行</button>
</li>

<li>
跳转到优惠券的页面 goToCouponList<button id="goToCouponList">执行</button>
</li>

<li>
添加日历提醒 AddToCalendarWebAction<button id="AddToCalendarWebAction">执行</button>
</li>

<li>
黑珍珠展示多图 showWebMultiPicture<button id="showWebMultiPicture">执行</button>
</li>

<li>
隐藏输入法框 hideInput<button id="hideInput">执行</button>
</li>

<li>
设置页面随输入法伸缩 setSoftInputResize<button id="setSoftInputResize">执行</button>
</li>

<li>
调用手机自带浏览器 打开网页 openWebPager<button id="openWebPager">执行</button>
</li>

<li>
排行榜显示右上角按钮 rankInfo<button id="rankInfo">执行</button>
</li>

<li>
跳转到套餐列表页面 tutorpack<button id="tutorpack">执行</button>
</li>

<li>
显示跳转投诉的对话框 faqShowComplaint<button id="faqShowComplaint">执行</button>
</li>

<li>
显示联系我们对话框 faqShowContactUs<button id="faqShowContactUs">执行</button>
</li>

<li>
显示ufo反馈界面 faqShowUfo<button id="faqShowUfo">执行</button>
</li>

<li>
为h5运营提供的拍照或从图库取一个图片上传 cameraUpload<button id="cameraUpload">执行</button>
</li>

<li>
打开原生浏览器 openBrowser<button id="openBrowser">执行</button>
</li>

<li>
跳转到个人信息界面 goToPersonalInfor<button id="goToPersonalInfor">执行</button>
</li>

<li>
跳转到称号修改页面 goToUserTitleAction<button id="goToUserTitleAction">执行</button>
</li>

<li>
跳转到用户资料修改页面 goToUserProfile<button id="goToUserProfile">执行</button>
</li>

<li>
是否展示webActivity的分享按钮 show_share<button id="show_share">执行</button>
</li>

<li>
打开缓存列表 openCachelist<button id="openCachelist">执行</button>
</li>

<li>
跳转到平台通用支付页 platformPay<button id="platformPay">执行</button>
</li>

<li>
打开游戏WebActivity openGameWindow<button id="openGameWindow">执行</button>
</li>

<li>
打开游戏奖励弹窗 openGameRewardBox<button id="openGameRewardBox">执行</button>
</li>

<li>
通用跳转 APPJumpProtocol<button id="APPJumpProtocol">执行</button>
</li>

<li>
转人工客服 openOnlineService<button id="openOnlineService">执行</button>
</li>

<li>
广告点击功能根据btype内部跳转、外部跳转、下载等 commonClick<button id="commonClick">执行</button>
</li>

<li>
知识宇宙 跳转到首页 universeKnowledgeHome<button id="universeKnowledgeHome">执行</button>
</li>

<li>
知识宇宙 跳转到专辑列表页 universeKnowledgeAlbum<button id="universeKnowledgeAlbum">执行</button>
</li>

<li>
知识宇宙 跳转到播放页面 universeKnowledgePlayFM<button id="universeKnowledgePlayFM">执行</button>
</li>

<li>
调用Native登录操作 reLoginDialog<button id="reLoginDialog">执行</button>
</li>

<li>
滑动退出滑动冲突上报冲突控件 slidingExitState<button id="slidingExitState">执行</button>
</li>

<li>
feed details 判断linkurl 是不是 null isShowVideosInArticle<button id="isShowVideosInArticle">执行</button>
</li>

<li>
是否禁止back键（只能用于WebActivity中） forbidBack<button id="forbidBack">执行</button>
</li>

<li>
跳转到搜索题目详情页 goSearchResult<button id="goSearchResult">执行</button>
</li>

<li>
打开机器人聊天页面 openRobotChat<button id="openRobotChat">执行</button>
</li>

<li>
跳转到绑定手机号页面 goBindPhone<button id="goBindPhone">执行</button>
</li>

<!-- <li>
 <button id="">执行</button>
</li>

<li>
 <button id="">执行</button>
</li> -->
</ol>

<script>

function HybridApi(){
	var protocol = "iknowhybrid://";
	var callbackCount = 0;
	function createBridge(src){
		var bridge = document.createElement("iframe");
		bridge.setAttribute("style", "display:none;");
		bridge.setAttribute("height","0px");
		bridge.setAttribute("width","0px");
		bridge.setAttribute("frameborder","0");
		document.documentElement.appendChild(bridge);
		return bridge;
	}
	//action必填，其他的选填
	function buildUrl(action,params,callback){
		var url = protocol+action+"?";
		url+="data="+encodeURIComponent(JSON.stringify(params||{}));
		if(callback){
			var callbackName = "__cb__"+callbackCount++;
			window[callbackName] = function(){
				callback && callback.apply(window,arguments);
			}
			url += "&__callback__="+callbackName;
		}
		return url;
	}
	this.exec = function(action,params,callback){
		var bridge = createBridge();
		bridge.setAttribute('src',buildUrl(action,params,callback));
		setTimeout(function(){
				bridge.parentNode.removeChild(bridge);
				bridge = null;
				},0);
	}
}
var hybridApi = new HybridApi();
// var vConsole = new VConsole();


document.querySelector("#common").onclick = function(){
	hybridApi.exec("common",
		{},
		function(params){
			alert(JSON.stringify(params));
			});
}

document.querySelector("#is_login").onclick = function(){
	hybridApi.exec("is_login",
		{},
		function(result){
			hybridApi.exec("toast",{text:result.isLogin+""});
			});
}

document.querySelector("#login").onclick = function(){
	hybridApi.exec("login");
}

document.querySelector('#loginForResult').onclick = function() {
	hybridApi.exec('loginForResult',
		{},
		function(result) {
	 	alert(JSON.stringify(result));
	 }
	);
}

document.querySelector('#getuserinfo').onclick = function() {
	hybridApi.exec ('getuserinfo',
		{},
		function(result) {
			alert(JSON.stringify(result));
		}
		);
}

document.querySelector("#openWindow").onclick = function() {
	hybridApi.exec("openWindow",
		{
			url:"http://www.hao123.com",
			hideNav: '1',
			dialogTitle: "退出hao123",
			dialogSubtitle: '退出',
			dialogLeftText: '取消',
			dialogRightText: '确定',
			dialogCloseBtn: '关闭'
		}
		);
}
document.querySelector("#exit").onclick = function(){
	hybridApi.exec("exit");
}

document.querySelector('#playVideo').onclick = function() {
	hybridApi.exec('playVideo',
		{
			// playUrl: 'https://charge.zuoyebang.cc/knowledge_e194552d5b75bc53f6172c4c873cb599.mp4?authorization=bce-auth-v1%2F80054b2251d24cb98eda994c93426d7d%2F2018-11-08T08%3A08%3A21Z%2F2592000%2Fhost%2Fe862d3a7bdd4f4fd4729c1ec9b929de2ade2e169545187f0de3b3d3706ac618a',
			playUrl: 'https://bd-s.zuoyebang.cc/zyb-181262.mp4',
			playType: '1',
			tid: '100',
			from: 'search',
			title: '播放视频',
			linkUrl: 'https://bd-s.zuoyebang.cc/zyb-181262.mp4',
			srcType: 1,
			landscape: true,
			rateType: true,
			encryption: '1',
			assignPlayPosition : 0
		}
		);
}

document.querySelector("#toast").onclick = function(){
	hybridApi.exec("toast",{text:"这工作真他妈傻逼"});
}

document.querySelector('#dial').onclick = function() {
	hybridApi.exec('dial', {phone:"18804627884"});
}

document.querySelector('#copyToClipboard').onclick = function() {
	hybridApi.exec('copyToClipboard', 
		{
			content: "复制我",
			hint: "成功了",
		}
		);
}

document.querySelector("#share").onclick = function(){
	hybridApi.exec("share",
		{
			share_text:"我是分享文字，不服么",
			share_text_weibo:"这是缀在分享文字后给微博额外添加的文字",
			share_img:"https://yy-s.zuoyebang.cc/static/drawbook/theme/booklist5-up.png",
			share_url:"http://wapiknow.baidu.com"
		},
		function(result) {
			alert(JSON.stringify(result));
		}
		);
}

document.querySelector('#showWebPicture').onclick = function() {
	hybridApi.exec('showWebPicture',
		{
			imageUrl: 'https://yy-s.zuoyebang.cc/static/drawbook/theme/booklist5-up.png',
			isSave: 1,
			isFinish: 0
		}
		);
}

document.querySelector('#openCamera').onclick = function() {
	hybridApi.exec('openCamera');
}

document.querySelector('#swapBack').onclick = function() {
	var enabled = false;
	hybridApi.exec('swapBack',
		{
			enabled: enabled
		}
		);
	var text = '已开启web页面右滑返回';
	if (!enabled) {
		text = '已禁止web页面右滑返回';
	}
	hybridApi.exec('toast',{text: text});
}

// document.querySelector('#startActivity').onclick = function() {
// 	hybridApi.exec('startActivity',
// 		{intent:});
// }

// document.querySelector('#searchResultZoomStart').onclick = function() {
// 	hybridApi.exec('searchResultZoomStart',
// 		);
// }

document.querySelector('#downloadMedia').onclick = function() {
	hybridApi.exec('downloadMedia',
	{
		url: 'https://bd-s.zuoyebang.cc/zyb-181262.mp4',
		// url: 'https://yy-s.zuoyebang.cc/static/drawbook/theme/booklist7-up.png',
		type: 3
	}
		);
	}
	
document.querySelector("#vibrate").onclick = function(){
	hybridApi.exec("vibrate",
		{
			vibrate_repeat: -1,
			vibrate_pattern: [0,500]
		}
		);
}
document.querySelector("#invite").onclick = function(){
	hybridApi.exec("invite",
		{
			invite_url: 'http://qatest18.suanshubang.com/activity/donation/index',
			invite_text: '欢迎来百度',
			invite_title: '我是标题'
		});
}

// document.querySelector("#address").onclick = function(){
// 	// window.onSubmitSuccess = function(){
// 	// 	hybridApi.exec("toast",{text:"地址提交成功"});
// 	// }
// 	hybridApi.exec("address",
// 		{address_id:0},
// 		function(res) 
// 		{
// 			alert(JSON.stringify(res));
// 		});
// }

document.querySelector("#unsolved_questionlist").onclick = function(){
	hybridApi.exec("unsolved_questionlist");
}

document.querySelector("#fill_school").onclick = function(){
	window.setSchool = function(schoolName){
		hybridApi.exec("toast",{text:schoolName});
	}
	hybridApi.exec("fill_school");
}

document.querySelector("#my_gift").onclick = function(){
	hybridApi.exec("my_gift");
}

document.querySelector("#scrape_card").onclick = function(){
	hybridApi.exec("scrape_card");
}

document.querySelector('#mall_home').onclick = function() {
	hybridApi.exec('mall_home');
}

document.querySelector("#getLocation").onclick = function(){
	hybridApi.exec("getLocation",
		{},
		function(res){
			alert(JSON.stringify(res));
			});
}

document.querySelector('#ugc').onclick = function() {
	hybridApi.exec('ugc');
	hybridApi.exec('toast', {text:'已成功设置'});
}

document.querySelector('#loadmore').onclick = function() {
	hybridApi.exec('loadmore',{id: 20});
	hybridApi.exec('toast', {text:'已成功加载至第20条数据'});
}

document.querySelector('#loadempty').onclick = function() {
	hybridApi.exec('loadempty');
		hybridApi.exec('toast', {text:'已成功执行收藏空回调'});
}

document.querySelector('#knowledgeCard').onclick = function() {
	hybridApi.exec('knowledgeCard',
		{
			title: '知识卡',
			pointId: '1c0f808df54c61726c4865905db37907'
		});
}

document.querySelector('#showComposition').onclick = function() {
	hybridApi.exec('showComposition',
		{
			composition_content: '我是作文内容',
			composition_summary: '我是作文摘要',
		});
	hybridApi.exec('toast', {text: '已成功更新'});
}

document.querySelector('#backCompositionList').onclick = function() {
	hybridApi.exec('backCompositionList');
	hybridApi.exec('toast', {text: '执行成功'});
}

document.querySelector('#backToClassicalMoreMeaningPage').onclick = function() {
	hybridApi.exec('backToClassicalMoreMeaningPage',{word:'木兰诗'});
}

document.querySelector('#loginMall').onclick = function() {
	hybridApi.exec('loginMall');
}

document.querySelector('#universalLaunchPage').onclick = function() {
	hybridApi.exec('universalLaunchPage',
		{
			pageName: "检索结果页",
			launchNow: true,
			params: [1,2]
		},
		function(res) {
			alert(JSON.stringify(res));
		});
}

document.querySelector('#feedback').onclick = function() {
	hybridApi.exec('feedback', 
		{
			feedback_channel: 1308, 
			faq_channel: 1309
		});
}

document.querySelector('#downLoadPenData').onclick = function() {
	hybridApi.exec('downLoadPenData',
		{
			url: 'http://qatest18.suanshubang.com'
		},
		function(res) {
			alert(JSON.stringify(res));
		});
}

document.querySelector('#goEvaluation').onclick = function() {
	hybridApi.exec('goEvaluation',
		{
			service_id: '1',
			teacher_id: '1',
		});
}

document.querySelector('#weiboShare').onclick = function() {
	hybridApi.exec('weiboShare', 
		{
			content: '我是内容'
		},
		function(res) {
			alert(JSON.stringify(res));
		});
}

document.querySelector('#playbackMenu').onclick = function() {
	hybridApi.exec('platbackMenu',
		{
			isShare: true,
			isEvaluation: false,
			isFeedback: false,
			shareTitle: '我是分享标题',
			shareContent: '我是分享内容',
			shareWeiboContent: '我是微博分享内容',
			shareUrl: 'http://qatest18.suanshubang.com/activity/donation/index'
		});
alert('这个action太复杂，参数是对的，没结果');
}

document.querySelector('#updateCheck').onclick = function() {
	hybridApi.exec('updateCheck',{},function(res) {
		alert(JSON.stringify(res));
	});
}

document.querySelector('#contributeComposition').onclick = function() {
	hybridApi.exec('contributeComposition',
		{
			composition_type: 1
		});
}

document.querySelector('#publishComposition').onclick = function() {
	hybridApi.exec('publishComposition',
		{
			composition_id: '1'
		});
}

document.querySelector('#reciteRecordVoiceButtonShow').onclick = function() {
	var ran = Math.floor(Math.random() * 10 + 1);
	var status = true;
	if (ran > 5) {
		status = false;
	}
	hybridApi.exec('reciteRecordVoiceButtonShow', {show: status});
	if (status) {
		alert('展示按钮');
	}
	else {
		alert('不展示按钮');
	}
}

document.querySelector('#goToCouponList').onclick = function() {
	hybridApi.exec('goToCouponList');
}

document.querySelector('#AddToCalendarWebAction').onclick = function() {
	hybridApi.exec('AddToCalendarWebAction',
		{},
		function(res) {
			alert(JSON.stringify(res));
		});
}

document.querySelector('#showWebMultiPicture').onclick = function() {
	hybridApi.exec('showWebMultiPicture',
		{
			imageUrlArr: [
			'https://www.zybang.com/static/drawbook/scene/1-1.png',
			'https://www.zybang.com/static/drawbook/scene/1-2.png'],
			from: '你程大爷',
			index: 0
		});
}

document.querySelector('#hideInput').onclick = function() {
	hybridApi.exec('hideInput');
	alert('隐藏输入法框成功');
}

document.querySelector('#setSoftInputResize').onclick = function() {
	hybridApi.exec('setSoftInputResize');
	alert('设置页面随输入法伸缩成功');
}

document.querySelector('#openWebPager').onclick = function() {
	hybridApi.exec('openWebPager', {url:'http://www.baidu.com'});
}

document.querySelector('#rankInfo').onclick = function() {
	hybridApi.exec('rankInfo', {info: '我是你爸爸'});
}

document.querySelector('#tutorpack').onclick = function() {
	hybridApi.exec('tutorpack', {from: '来自你爸爸', isClose: 1});
}

document.querySelector('#faqShowComplaint').onclick = function() {
	hybridApi.exec('faqShowComplaint');
}

document.querySelector('#faqShowContactUs').onclick = function() {
	hybridApi.exec('faqShowContactUs');
}

document.querySelector('#faqShowUfo').onclick = function() {
	hybridApi.exec('faqShowUfo', 
		{
			feedbackChannel: 1,
			faqChannel: 1,
			type: 0
		},
		function(res) {
			alert(JSON.stringify(res));
		});
}

document.querySelector('#cameraUpload').onclick = function() {
	hybridApi.exec('cameraUpload',
		{type: 0},
		function(res) {
			alert(JSON.stringify(res));
		});
}

document.querySelector('#openBrowser').onclick = function() {
	hybridApi.exec('openBrowser', {url: 'http://www.4399.com'});
}

document.querySelector('#goToPersonalInfor').onclick = function() {
	hybridApi.exec('goToPersonalInfor');
}

document.querySelector('#goToUserTitleAction').onclick = function() {
	hybridApi.exec('goToUserTitleAction');
}

document.querySelector('#goToUserProfile').onclick = function() {
	hybridApi.exec('goToUserProfile');
}

document.querySelector('#show_share').onclick = function() {
	hybridApi.exec('show_share',
		{
			is_share: true,
			share_title: '我是你标题爸爸',
			share_text: '我是你内容爸爸',
			share_text_weibo: '我是你微博内容爸爸',
			share_img: 'https://www.zybang.com/static/drawbook/scene/1-2.png',
			share_url: 'http://qatest18.suanshubang.com/activity/donation/index',
			share_origin: '来自你爸爸',
			share_type: [0,1,2,3]
		},
		function(res) {
			alert(JSON.stringify(res));
		});
}

document.querySelector("#openCachelist").onclick = function() {
	hybridApi.exec('openCachelist');
}

document.querySelector("#platformPay").onclick = function() {
	hybridApi.exec('platformPay',
		{
			serviceId: 5,
			itemId: 1
		},
		function(res) {
			alert(JSON.stringify(res));
		});
}
</script>
</body>
</html>

